<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>操作系统选择测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 600px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .preview {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }
        .preview h3 {
            margin-top: 0;
            color: #007bff;
        }
        .selected-item {
            padding: 8px 12px;
            margin: 5px 0;
            background-color: #e3f2fd;
            border-radius: 4px;
            border: 1px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>操作系统选择功能测试</h1>
        <p>这个测试页面展示了系统镜像管理中的操作系统预设选择功能。</p>
        
        <div class="form-group">
            <label for="osSelect">选择操作系统:</label>
            <select id="osSelect" onchange="updateDisplay()">
                <option value="">请选择操作系统</option>
                <optgroup label="Linux">
                    <option value="ubuntu">Ubuntu</option>
                    <option value="debian">Debian</option>
                    <option value="centos">CentOS</option>
                    <option value="rhel">Red Hat Enterprise Linux</option>
                    <option value="fedora">Fedora</option>
                    <option value="opensuse">openSUSE</option>
                    <option value="alpine">Alpine Linux</option>
                    <option value="arch">Arch Linux</option>
                    <option value="mint">Linux Mint</option>
                    <option value="kali">Kali Linux</option>
                    <option value="rocky">Rocky Linux</option>
                    <option value="almalinux">AlmaLinux</option>
                    <option value="oracle">Oracle Linux</option>
                    <option value="amazonlinux">Amazon Linux</option>
                    <option value="sles">SUSE Linux Enterprise Server</option>
                </optgroup>
                <optgroup label="BSD">
                    <option value="freebsd">FreeBSD</option>
                    <option value="openbsd">OpenBSD</option>
                    <option value="netbsd">NetBSD</option>
                    <option value="dragonflybsd">DragonFly BSD</option>
                </optgroup>
                <optgroup label="Windows">
                    <option value="windows">Windows Server</option>
                    <option value="windows2019">Windows Server 2019</option>
                    <option value="windows2022">Windows Server 2022</option>
                    <option value="windows10">Windows 10</option>
                    <option value="windows11">Windows 11</option>
                </optgroup>
                <optgroup label="Container">
                    <option value="busybox">BusyBox</option>
                    <option value="scratch">Scratch</option>
                    <option value="distroless">Distroless</option>
                </optgroup>
                <optgroup label="Other">
                    <option value="openwrt">OpenWrt</option>
                    <option value="other">其他</option>
                </optgroup>
            </select>
        </div>

        <div class="form-group">
            <label for="versionSelect">选择版本:</label>
            <select id="versionSelect" onchange="updateDisplay()">
                <option value="">请先选择操作系统</option>
            </select>
        </div>

        <div class="preview">
            <h3>选择预览</h3>
            <div id="selectedOs" class="selected-item" style="display: none;">
                <strong>操作系统:</strong> <span id="osName"></span>
            </div>
            <div id="selectedVersion" class="selected-item" style="display: none;">
                <strong>版本:</strong> <span id="versionName"></span>
            </div>
            <p id="noSelection" style="color: #666; font-style: italic;">请选择操作系统和版本</p>
        </div>
    </div>

    <script>
        // 常用版本映射
        const commonVersions = {
            ubuntu: ['20.04', '22.04', '24.04', '18.04'],
            debian: ['11', '12', '10', '9'],
            centos: ['7', '8', '9'],
            rhel: ['8', '9', '7'],
            fedora: ['38', '39', '40', '37'],
            opensuse: ['15.5', '15.4', 'Tumbleweed'],
            alpine: ['3.18', '3.19', '3.17', 'edge'],
            arch: ['latest'],
            mint: ['21', '20.3', '19.3'],
            kali: ['2023.4', '2023.3', 'rolling'],
            rocky: ['8', '9'],
            almalinux: ['8', '9'],
            oracle: ['8', '9', '7'],
            amazonlinux: ['2', '2023'],
            sles: ['15', '12'],
            freebsd: ['13.2', '12.4', '14.0'],
            openbsd: ['7.4', '7.3'],
            netbsd: ['9.3', '10.0'],
            windows2019: ['1809', '1903', '1909'],
            windows2022: ['21H2'],
            windows10: ['21H2', '22H2'],
            windows11: ['21H2', '22H2', '23H2'],
            openwrt: ['22.03', '23.05']
        };

        function updateVersions() {
            const osSelect = document.getElementById('osSelect');
            const versionSelect = document.getElementById('versionSelect');
            const selectedOs = osSelect.value;

            // 清空版本选择
            versionSelect.innerHTML = '<option value="">请选择版本</option>';

            if (selectedOs && commonVersions[selectedOs]) {
                const versions = commonVersions[selectedOs];
                versions.forEach(version => {
                    const option = document.createElement('option');
                    option.value = version;
                    option.textContent = version;
                    versionSelect.appendChild(option);
                });
                versionSelect.disabled = false;
            } else {
                versionSelect.disabled = true;
                versionSelect.innerHTML = '<option value="">该操作系统暂无预设版本</option>';
            }
        }

        function updateDisplay() {
            const osSelect = document.getElementById('osSelect');
            const versionSelect = document.getElementById('versionSelect');
            const selectedOs = osSelect.value;
            const selectedVersion = versionSelect.value;

            const osDiv = document.getElementById('selectedOs');
            const versionDiv = document.getElementById('selectedVersion');
            const noSelectionP = document.getElementById('noSelection');
            const osNameSpan = document.getElementById('osName');
            const versionNameSpan = document.getElementById('versionName');

            if (selectedOs) {
                osNameSpan.textContent = osSelect.options[osSelect.selectedIndex].text;
                osDiv.style.display = 'block';
                noSelectionP.style.display = 'none';
            } else {
                osDiv.style.display = 'none';
                versionDiv.style.display = 'none';
                noSelectionP.style.display = 'block';
                return;
            }

            if (selectedVersion) {
                versionNameSpan.textContent = selectedVersion;
                versionDiv.style.display = 'block';
            } else {
                versionDiv.style.display = 'none';
            }
        }

        // 绑定操作系统选择变化事件
        document.getElementById('osSelect').addEventListener('change', function() {
            updateVersions();
            updateDisplay();
        });

        // 初始化
        updateVersions();
        updateDisplay();
    </script>
</body>
</html>
